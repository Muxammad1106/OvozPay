# üìë –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API –º–æ–¥—É–ª—è –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π –∏ –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∞ OvozPay

## üéØ –≠—Ç–∞–ø 7: Reminders & Scheduler API

### üìã –û–±—â–µ–µ –æ–ø–∏—Å–∞–Ω–∏–µ

–ú–æ–¥—É–ª—å –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π –∏ –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∞ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º OvozPay —Å–æ–∑–¥–∞–≤–∞—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –æ —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã—Ö —Å–æ–±—ã—Ç–∏—è—Ö:
- –ü–ª–∞—Ç–µ–∂–∞—Ö
- –î–æ–ª–≥–∞—Ö  
- –¶–µ–ª—è—Ö
- –ü—Ä–æ–∏–∑–≤–æ–ª—å–Ω—ã—Ö —Å–æ–±—ã—Ç–∏—è—Ö

–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è —á–µ—Ä–µ–∑ Telegram –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π.

---

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏

- **JWT-–∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è** –Ω–∞ –≤—Å–µ—Ö —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞—Ö
- **5 —Ç–∏–ø–æ–≤ Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π** —Å HTML —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º
- **Celery –∑–∞–¥–∞—á–∏** –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ (–∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç)
- **–ü–æ–ª–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è** –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- **–ê—Ç–æ–º–∞—Ä–Ω–æ—Å—Ç—å** –æ–ø–µ—Ä–∞—Ü–∏–π —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö
- **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** –≤—Å–µ—Ö –¥–µ–π—Å—Ç–≤–∏–π
- **–ò–Ω–¥–µ–∫—Å—ã** –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

---

## üìä –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö

### Reminder (–ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ)
```python
{
    "id": "UUID",
    "user": "ForeignKey(User)",
    "title": "CharField(255)",
    "description": "TextField (optional)",
    "reminder_type": "choice: payment|debt|goal|custom",
    "scheduled_time": "DateTimeField",
    "repeat": "choice: once|daily|weekly|monthly",
    "is_active": "BooleanField",
    "amount": "DecimalField (optional)",
    "goal": "ForeignKey(Goal, optional)",
    "last_sent": "DateTimeField (optional)",
    "next_reminder": "DateTimeField (optional)",
    "telegram_notified": "BooleanField",
    "created_at": "DateTimeField",
    "updated_at": "DateTimeField"
}
```

### ReminderHistory (–ò—Å—Ç–æ—Ä–∏—è –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π)
```python
{
    "id": "UUID",
    "reminder": "ForeignKey(Reminder)",
    "sent_at": "DateTimeField",
    "status": "choice: sent|failed|manual",
    "telegram_message_id": "IntegerField (optional)",
    "error_message": "TextField (optional)",
    "created_at": "DateTimeField"
}
```

---

## üîó API Endpoints (12 –æ—Å–Ω–æ–≤–Ω—ã—Ö)

### Base URL: `/api/reminders/`

### 1. üìã –°–ø–∏—Å–æ–∫ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
```http
GET /api/reminders/
Authorization: Bearer <token>
```

**Query –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `reminder_type` - —Ñ–∏–ª—å—Ç—Ä –ø–æ —Ç–∏–ø—É (payment, debt, goal, custom)
- `repeat` - —Ñ–∏–ª—å—Ç—Ä –ø–æ –ø–µ—Ä–∏–æ–¥–∏—á–Ω–æ—Å—Ç–∏ (once, daily, weekly, monthly)
- `is_active` - —Ñ–∏–ª—å—Ç—Ä –ø–æ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ (true/false)
- `search` - –ø–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é –∏–ª–∏ –æ–ø–∏—Å–∞–Ω–∏—é
- `ordering` - —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ (created_at, scheduled_time, next_reminder)
- `page` - –Ω–æ–º–µ—Ä —Å—Ç—Ä–∞–Ω–∏—Ü—ã

**–ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞:**
```json
{
    "count": 15,
    "next": "http://api/reminders/?page=2",
    "previous": null,
    "results": [
        {
            "id": "550e8400-e29b-41d4-a716-446655440000",
            "title": "–û–ø–ª–∞—Ç–∏—Ç—å –∏–Ω—Ç–µ—Ä–Ω–µ—Ç",
            "reminder_type": "payment",
            "reminder_type_display": "–ü–ª–∞—Ç–µ–∂",
            "scheduled_time": "2024-06-20T12:00:00Z",
            "repeat": "monthly",
            "repeat_display": "–ï–∂–µ–º–µ—Å—è—á–Ω–æ",
            "is_active": true,
            "amount": "450000.00",
            "goal_title": null,
            "next_reminder": "2024-07-20T12:00:00Z",
            "is_overdue": false,
            "is_upcoming": true,
            "created_at": "2024-06-01T10:00:00Z"
        }
    ]
}
```

---

### 2. ‚ûï –°–æ–∑–¥–∞—Ç—å –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ
```http
POST /api/reminders/
Authorization: Bearer <token>
Content-Type: application/json
```

**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:**
```json
{
    "title": "–û–ø–ª–∞—Ç–∏—Ç—å –∫–æ–º–º—É–Ω–∞–ª—å–Ω—ã–µ —É—Å–ª—É–≥–∏",
    "description": "–ï–∂–µ–º–µ—Å—è—á–Ω–∞—è –æ–ø–ª–∞—Ç–∞ –ñ–ö–•",
    "reminder_type": "payment",
    "scheduled_time": "2024-06-25T09:00:00Z",
    "repeat": "monthly",
    "amount": "850000.00"
}
```

**–ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞:**
```json
{
    "id": "550e8400-e29b-41d4-a716-446655440001",
    "title": "–û–ø–ª–∞—Ç–∏—Ç—å –∫–æ–º–º—É–Ω–∞–ª—å–Ω—ã–µ —É—Å–ª—É–≥–∏",
    "description": "–ï–∂–µ–º–µ—Å—è—á–Ω–∞—è –æ–ø–ª–∞—Ç–∞ –ñ–ö–•",
    "reminder_type": "payment",
    "reminder_type_display": "–ü–ª–∞—Ç–µ–∂",
    "scheduled_time": "2024-06-25T09:00:00Z",
    "repeat": "monthly",
    "repeat_display": "–ï–∂–µ–º–µ—Å—è—á–Ω–æ",
    "is_active": true,
    "amount": "850000.00",
    "goal": null,
    "goal_title": null,
    "last_sent": null,
    "next_reminder": null,
    "telegram_notified": true,
    "created_at": "2024-06-20T14:30:00Z",
    "updated_at": "2024-06-20T14:30:00Z",
    "user_phone": "+998901234567",
    "is_overdue": false,
    "is_upcoming": false,
    "time_until_reminder": 432000
}
```

---

### 3. üìÑ –ü–æ–ª—É—á–∏—Ç—å –¥–µ—Ç–∞–ª—å–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é
```http
GET /api/reminders/{id}/
Authorization: Bearer <token>
```

**–ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞:**
```json
{
    "id": "550e8400-e29b-41d4-a716-446655440001",
    "title": "–û–ø–ª–∞—Ç–∏—Ç—å –∫–æ–º–º—É–Ω–∞–ª—å–Ω—ã–µ —É—Å–ª—É–≥–∏",
    "description": "–ï–∂–µ–º–µ—Å—è—á–Ω–∞—è –æ–ø–ª–∞—Ç–∞ –ñ–ö–•",
    "reminder_type": "payment",
    "reminder_type_display": "–ü–ª–∞—Ç–µ–∂",
    "scheduled_time": "2024-06-25T09:00:00Z",
    "repeat": "monthly",
    "repeat_display": "–ï–∂–µ–º–µ—Å—è—á–Ω–æ",
    "is_active": true,
    "amount": "850000.00",
    "goal": null,
    "goal_title": null,
    "last_sent": null,
    "next_reminder": null,
    "telegram_notified": true,
    "created_at": "2024-06-20T14:30:00Z",
    "updated_at": "2024-06-20T14:30:00Z",
    "user_phone": "+998901234567",
    "is_overdue": false,
    "is_upcoming": false,
    "time_until_reminder": 432000
}
```

---

### 4. ‚úèÔ∏è –ü–æ–ª–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
```http
PUT /api/reminders/{id}/
Authorization: Bearer <token>
Content-Type: application/json
```

**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:**
```json
{
    "title": "–û–ø–ª–∞—Ç–∏—Ç—å –∫–æ–º–º—É–Ω–∞–ª—å–Ω—ã–µ —É—Å–ª—É–≥–∏ (–æ–±–Ω–æ–≤–ª–µ–Ω–æ)",
    "description": "–ï–∂–µ–º–µ—Å—è—á–Ω–∞—è –æ–ø–ª–∞—Ç–∞ –ñ–ö–• - –Ω–æ–≤–∞—è —Å—É–º–º–∞",
    "reminder_type": "payment",
    "scheduled_time": "2024-06-25T10:00:00Z",
    "repeat": "monthly",
    "amount": "900000.00",
    "is_active": true
}
```

---

### 5. üîß –ß–∞—Å—Ç–∏—á–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
```http
PATCH /api/reminders/{id}/
Authorization: Bearer <token>
Content-Type: application/json
```

**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:**
```json
{
    "amount": "950000.00",
    "scheduled_time": "2024-06-25T11:00:00Z"
}
```

---

### 6. ‚ùå –£–¥–∞–ª–∏—Ç—å –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ
```http
DELETE /api/reminders/{id}/
Authorization: Bearer <token>
```

**–ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞:**
```json
{
    "message": "–ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ \"–û–ø–ª–∞—Ç–∏—Ç—å –∫–æ–º–º—É–Ω–∞–ª—å–Ω—ã–µ —É—Å–ª—É–≥–∏\" —É—Å–ø–µ—à–Ω–æ —É–¥–∞–ª–µ–Ω–æ"
}
```

---

### 7. ‚úÖ –ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ
```http
POST /api/reminders/{id}/activate/
Authorization: Bearer <token>
```

**–ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞:**
```json
{
    "is_active": true,
    "message": "–ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–æ"
}
```

---

### 8. ‚èπÔ∏è –î–µ–∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ
```http
POST /api/reminders/{id}/deactivate/
Authorization: Bearer <token>
```

**–ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞:**
```json
{
    "is_active": false,
    "message": "–ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –¥–µ–∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–æ"
}
```

---

### 9. ‚è∞ –ë–ª–∏–∂–∞–π—à–∏–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è
```http
GET /api/reminders/upcoming/
Authorization: Bearer <token>
```

**–û–ø–∏—Å–∞–Ω–∏–µ:** –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–µ –¥–æ–ª–∂–Ω—ã —Å—Ä–∞–±–æ—Ç–∞—Ç—å –≤ —Ç–µ—á–µ–Ω–∏–µ 24 —á–∞—Å–æ–≤.

**–ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞:**
```json
{
    "count": 3,
    "results": [
        {
            "id": "550e8400-e29b-41d4-a716-446655440002",
            "title": "–ü–µ—Ä–µ–≤–µ—Å—Ç–∏ –¥–µ–Ω—å–≥–∏ —Ä–æ–¥–∏—Ç–µ–ª—è–º",
            "reminder_type": "custom",
            "reminder_type_display": "–ü—Ä–æ–∏–∑–≤–æ–ª—å–Ω–æ–µ",
            "scheduled_time": "2024-06-21T15:00:00Z",
            "repeat": "weekly",
            "repeat_display": "–ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω–æ",
            "is_active": true,
            "amount": null,
            "goal_title": null,
            "next_reminder": null,
            "is_overdue": false,
            "is_upcoming": true,
            "created_at": "2024-06-15T12:00:00Z"
        }
    ]
}
```

---

### 10. üìö –ò—Å—Ç–æ—Ä–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã—Ö –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π
```http
GET /api/reminders/history/
Authorization: Bearer <token>
```

**Query –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `status` - —Ñ–∏–ª—å—Ç—Ä –ø–æ —Å—Ç–∞—Ç—É—Å—É (sent, failed, manual)
- `reminder__reminder_type` - —Ñ–∏–ª—å—Ç—Ä –ø–æ —Ç–∏–ø—É –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è
- `ordering` - —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ (sent_at, created_at)
- `page` - –Ω–æ–º–µ—Ä —Å—Ç—Ä–∞–Ω–∏—Ü—ã

**–ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞:**
```json
{
    "count": 25,
    "next": "http://api/reminders/history/?page=2",
    "previous": null,
    "results": [
        {
            "id": "550e8400-e29b-41d4-a716-446655440010",
            "reminder": "550e8400-e29b-41d4-a716-446655440001",
            "reminder_title": "–û–ø–ª–∞—Ç–∏—Ç—å –∏–Ω—Ç–µ—Ä–Ω–µ—Ç",
            "reminder_type": "payment",
            "sent_at": "2024-06-20T12:00:05Z",
            "status": "sent",
            "status_display": "–û—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ",
            "telegram_message_id": 12345,
            "error_message": null,
            "user_phone": "+998901234567",
            "created_at": "2024-06-20T12:00:05Z"
        }
    ]
}
```

---

### 11. üöÄ –û—Ç–ø—Ä–∞–≤–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –≤—Ä—É—á–Ω—É—é
```http
POST /api/reminders/{id}/send-now/
Authorization: Bearer <token>
```

**–ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞:**
```json
{
    "message": "–ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ \"–û–ø–ª–∞—Ç–∏—Ç—å –∏–Ω—Ç–µ—Ä–Ω–µ—Ç\" –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ",
    "sent_at": "2024-06-20T16:30:00Z",
    "telegram_message_id": 12346
}
```

---

### 12. üìù –°–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Ç–∏–ø–æ–≤
```http
GET /api/reminders/types/
Authorization: Bearer <token>
```

**–ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞:**
```json
{
    "reminder_types": [
        {"value": "payment", "label": "–ü–ª–∞—Ç–µ–∂"},
        {"value": "debt", "label": "–î–æ–ª–≥"},
        {"value": "goal", "label": "–¶–µ–ª—å"},
        {"value": "custom", "label": "–ü—Ä–æ–∏–∑–≤–æ–ª—å–Ω–æ–µ"}
    ],
    "repeat_types": [
        {"value": "once", "label": "–û–¥–Ω–æ–∫—Ä–∞—Ç–Ω–æ"},
        {"value": "daily", "label": "–ï–∂–µ–¥–Ω–µ–≤–Ω–æ"},
        {"value": "weekly", "label": "–ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω–æ"},
        {"value": "monthly", "label": "–ï–∂–µ–º–µ—Å—è—á–Ω–æ"}
    ]
}
```

---

## üìä –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π
```http
GET /api/reminders/stats/
Authorization: Bearer <token>
```

**–ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞:**
```json
{
    "total_reminders": 25,
    "active_reminders": 18,
    "inactive_reminders": 7,
    "overdue_reminders": 2,
    "upcoming_reminders": 5,
    "payment_reminders": 8,
    "debt_reminders": 3,
    "goal_reminders": 6,
    "custom_reminders": 8,
    "once_reminders": 5,
    "daily_reminders": 3,
    "weekly_reminders": 7,
    "monthly_reminders": 10,
    "total_sent": 145,
    "sent_today": 8,
    "sent_this_week": 22,
    "sent_this_month": 85
}
```

### –ü—Ä–æ—Å—Ä–æ—á–µ–Ω–Ω—ã–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è
```http
GET /api/reminders/overdue/
Authorization: Bearer <token>
```

### –û–±—Ä–∞–±–æ—Ç–∞—Ç—å –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ (–∞–¥–º–∏–Ω)
```http
POST /api/reminders/process-scheduled/
Authorization: Bearer <admin_token>
```

---

## ü§ñ Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è (5 —Ç–∏–ø–æ–≤)

### 1. üîî –°–æ–∑–¥–∞–Ω–∏–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è
```html
<b>üîî –°–æ–∑–¥–∞–Ω–æ –Ω–æ–≤–æ–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ!</b>

üìù <b>–°–æ–±—ã—Ç–∏–µ:</b> –û–ø–ª–∞—Ç–∏—Ç—å –∏–Ω—Ç–µ—Ä–Ω–µ—Ç
üìÖ <b>–î–∞—Ç–∞:</b> 20.06.2024 12:00
üîÑ <b>–ü–æ–≤—Ç–æ—Ä:</b> –µ–∂–µ–º–µ—Å—è—á–Ω–æ
üì± <b>–¢–∏–ø:</b> –ü–ª–∞—Ç–µ–∂
üí∞ <b>–°—É–º–º–∞:</b> 450,000 UZS

‚úÖ –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–æ –∏ –±—É–¥–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ –≤ —É–∫–∞–∑–∞–Ω–Ω–æ–µ –≤—Ä–µ–º—è!
```

### 2. üíµ –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –æ –ø–ª–∞—Ç–µ–∂–µ
```html
<b>üíµ –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –æ –ø–ª–∞—Ç–µ–∂–µ!</b>

üìù <b>–°–æ–±—ã—Ç–∏–µ:</b> –û–ø–ª–∞—Ç–∏—Ç—å –∏–Ω—Ç–µ—Ä–Ω–µ—Ç
üìÖ <b>–î–∞—Ç–∞:</b> 20.06.2024 12:00
üí∞ <b>–°—É–º–º–∞:</b> 450,000 UZS
üìã <b>–û–ø–∏—Å–∞–Ω–∏–µ:</b> –ï–∂–µ–º–µ—Å—è—á–Ω–∞—è –æ–ø–ª–∞—Ç–∞ —á–µ—Ä–µ–∑ Click

‚è∞ –í—Ä–µ–º—è –ø—Ä–∏—à–ª–æ! –ù–µ –∑–∞–±—É–¥—å—Ç–µ —Å–æ–≤–µ—Ä—à–∏—Ç—å –ø–ª–∞—Ç–µ–∂.
```

### 3. üìã –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –æ –¥–æ–ª–≥–µ
```html
<b>üìã –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –æ –¥–æ–ª–≥–µ!</b>

üìù <b>–°–æ–±—ã—Ç–∏–µ:</b> –í–µ—Ä–Ω—É—Ç—å –¥–æ–ª–≥ –ê—Ö–º–∞–¥—É
üìÖ <b>–î–∞—Ç–∞:</b> 22.06.2024 18:00
üí∞ <b>–°—É–º–º–∞:</b> 2,500,000 UZS
üìã <b>–û–ø–∏—Å–∞–Ω–∏–µ:</b> –û–¥–æ–ª–∂–∏–ª –Ω–∞ —Ä–µ–º–æ–Ω—Ç

‚ö†Ô∏è –ù–µ –∑–∞–±—É–¥—å—Ç–µ –ø–æ–≥–∞—Å–∏—Ç—å –¥–æ–ª–≥ –≤–æ–≤—Ä–µ–º—è!
```

### 4. üéØ –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –æ —Ü–µ–ª–∏
```html
<b>üéØ –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –æ —Ü–µ–ª–∏!</b>

üìù <b>–°–æ–±—ã—Ç–∏–µ:</b> –ü–æ–ø–æ–ª–Ω–∏—Ç—å –Ω–∞–∫–æ–ø–ª–µ–Ω–∏—è –Ω–∞ –æ—Ç–ø—É—Å–∫
üìÖ <b>–î–∞—Ç–∞:</b> 25.06.2024 20:00
üéØ <b>–¶–µ–ª—å:</b> –ü–æ–µ–∑–¥–∫–∞ –≤ –¢—É—Ä—Ü–∏—é
üìä <b>–ü—Ä–æ–≥—Ä–µ—Å—Å:</b> 65.5%
üí∞ <b>–û—Å—Ç–∞–ª–æ—Å—å:</b> 3,450,000 UZS

üöÄ –ü—Ä–æ–¥–æ–ª–∂–∞–π—Ç–µ —Ä–∞–±–æ—Ç–∞—Ç—å –Ω–∞–¥ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–µ–º —Ü–µ–ª–∏!
```

### 5. üìù –ö–∞—Å—Ç–æ–º–Ω–æ–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ
```html
<b>üìù –ö–∞—Å—Ç–æ–º–Ω–æ–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ!</b>

üìù <b>–°–æ–±—ã—Ç–∏–µ:</b> –ö—É–ø–∏—Ç—å –ø–æ–¥–∞—Ä–æ–∫ –º–∞–º–µ
üìÖ <b>–î–∞—Ç–∞:</b> 30.06.2024 14:00
üìã <b>–û–ø–∏—Å–∞–Ω–∏–µ:</b> –î–µ–Ω—å —Ä–æ–∂–¥–µ–Ω–∏—è 5 –∏—é–ª—è
üí∞ <b>–°—É–º–º–∞:</b> 1,000,000 UZS

üîî –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–∏—Ç—å –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ!
```

---

## ‚öôÔ∏è Celery –∑–∞–¥–∞—á–∏

### –û—Å–Ω–æ–≤–Ω—ã–µ –∑–∞–¥–∞—á–∏

#### 1. `send_scheduled_reminders`
- **–ß–∞—Å—Ç–æ—Ç–∞:** –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç
- **–§—É–Ω–∫—Ü–∏—è:** –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π
- **Retry:** 3 –ø–æ–ø—ã—Ç–∫–∏ —Å —ç–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–π –∑–∞–¥–µ—Ä–∂–∫–æ–π

#### 2. `repeat_reminders`
- **–ß–∞—Å—Ç–æ—Ç–∞:** –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç
- **–§—É–Ω–∫—Ü–∏—è:** –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ —Å–ª–µ–¥—É—é—â–µ–≥–æ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –¥–ª—è –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö

#### 3. `send_single_reminder`
- **–¢–∏–ø:** –ø–æ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—é
- **–§—É–Ω–∫—Ü–∏—è:** –æ—Ç–ø—Ä–∞–≤–∫–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è
- **Retry:** 2 –ø–æ–ø—ã—Ç–∫–∏

### –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ –∑–∞–¥–∞—á–∏

#### 4. `cleanup_old_reminder_history`
- **–ß–∞—Å—Ç–æ—Ç–∞:** –µ–∂–µ–¥–Ω–µ–≤–Ω–æ –≤ 2:00
- **–§—É–Ω–∫—Ü–∏—è:** —É–¥–∞–ª–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ —Å—Ç–∞—Ä—à–µ 6 –º–µ—Å—è—Ü–µ–≤

#### 5. `deactivate_expired_reminders`
- **–ß–∞—Å—Ç–æ—Ç–∞:** –µ–∂–µ–¥–Ω–µ–≤–Ω–æ –≤ 1:00
- **–§—É–Ω–∫—Ü–∏—è:** –¥–µ–∞–∫—Ç–∏–≤–∞—Ü–∏—è –ø—Ä–æ—Å—Ä–æ—á–µ–Ω–Ω—ã—Ö –æ–¥–Ω–æ—Ä–∞–∑–æ–≤—ã—Ö –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π

#### 6. `generate_reminder_stats`
- **–ß–∞—Å—Ç–æ—Ç–∞:** –µ–∂–µ–¥–Ω–µ–≤–Ω–æ –≤ 23:00
- **–§—É–Ω–∫—Ü–∏—è:** –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –µ–∂–µ–¥–Ω–µ–≤–Ω–æ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏

---

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
- **JWT —Ç–æ–∫–µ–Ω—ã** –Ω–∞ –≤—Å–µ—Ö —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞—Ö
- **–ò–∑–æ–ª—è—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö** - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –≤–∏–¥—è—Ç —Ç–æ–ª—å–∫–æ —Å–≤–æ–∏ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è
- **–í–∞–ª–∏–¥–∞—Ü–∏—è ownership** - –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–Ω–æ—Å—Ç–∏ —Ü–µ–ª–µ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é

### –í–∞–ª–∏–¥–∞—Ü–∏—è
- **–í—Ä–µ–º—è –≤ –±—É–¥—É—â–µ–º** –¥–ª—è –Ω–æ–≤—ã—Ö –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π
- **–ü–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–µ —Å—É–º–º—ã** –¥–ª—è –ø–ª–∞—Ç–µ–∂–µ–π –∏ –¥–æ–ª–≥–æ–≤
- **–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è** –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç–∏–ø–∞
- **–ö—Ä–æ—Å—Å-–≤–∞–ª–∏–¥–∞—Ü–∏—è** —Å–≤—è–∑–∞–Ω–Ω—ã—Ö –ø–æ–ª–µ–π

---

## üìà –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### –ò–Ω–¥–µ–∫—Å—ã –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
```sql
-- –î–ª—è –ø–æ–∏—Å–∫–∞ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
CREATE INDEX reminders_user_active_idx ON reminders (user_id, is_active);

-- –î–ª—è –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∞
CREATE INDEX reminders_scheduled_active_idx ON reminders (scheduled_time, is_active);
CREATE INDEX reminders_next_active_idx ON reminders (next_reminder, is_active);

-- –î–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏
CREATE INDEX reminders_type_idx ON reminders (reminder_type);
CREATE INDEX reminders_repeat_idx ON reminders (repeat);

-- –î–ª—è –∏—Å—Ç–æ—Ä–∏–∏
CREATE INDEX history_reminder_sent_idx ON reminder_history (reminder_id, sent_at);
CREATE INDEX history_status_idx ON reminder_history (status);
```

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
- **select_related** –¥–ª—è —Å–≤—è–∑–∞–Ω–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤
- **–ü–∞–≥–∏–Ω–∞—Ü–∏—è** –¥–ª—è –±–æ–ª—å—à–∏—Ö –Ω–∞–±–æ—Ä–æ–≤ –¥–∞–Ω–Ω—ã—Ö
- **–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –Ω–∞ —É—Ä–æ–≤–Ω–µ –ë–î** –¥–ª—è –º–∏–Ω–∏–º–∏–∑–∞—Ü–∏–∏ –æ–±—ä–µ–º–∞ –¥–∞–Ω–Ω—ã—Ö
- **–ê—Ç–æ–º–∞—Ä–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏** –¥–ª—è —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏ –¥–∞–Ω–Ω—ã—Ö

---

## üß™ –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –°–æ–∑–¥–∞–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–Ω–æ–≥–æ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è
```bash
curl -X POST http://localhost:8000/api/reminders/ \
  -H "Authorization: Bearer your_jwt_token" \
  -H "Content-Type: application/json" \
  -d '{
    "title": "–û–ø–ª–∞—Ç–∏—Ç—å –º–æ–±–∏–ª—å–Ω—É—é —Å–≤—è–∑—å",
    "reminder_type": "payment",
    "scheduled_time": "2024-07-01T10:00:00Z",
    "repeat": "monthly",
    "amount": "150000.00",
    "description": "Ucell —Ç–∞—Ä–∏—Ñ Business"
  }'
```

### –°–æ–∑–¥–∞–Ω–∏–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –æ —Ü–µ–ª–∏
```bash
curl -X POST http://localhost:8000/api/reminders/ \
  -H "Authorization: Bearer your_jwt_token" \
  -H "Content-Type: application/json" \
  -d '{
    "title": "–ü–æ–ø–æ–ª–Ω–∏—Ç—å –Ω–∞–∫–æ–ø–ª–µ–Ω–∏—è –Ω–∞ –º–∞—à–∏–Ω—É",
    "reminder_type": "goal",
    "scheduled_time": "2024-06-30T20:00:00Z",
    "repeat": "weekly",
    "goal": "550e8400-e29b-41d4-a716-446655440000",
    "description": "–ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω–æ–µ –ø–æ–ø–æ–ª–Ω–µ–Ω–∏–µ —Ü–µ–ª–∏"
  }'
```

### –ü–æ–ª—É—á–µ–Ω–∏–µ –±–ª–∏–∂–∞–π—à–∏—Ö –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π
```bash
curl -X GET "http://localhost:8000/api/reminders/upcoming/" \
  -H "Authorization: Bearer your_jwt_token"
```

### –û—Ç–ø—Ä–∞–≤–∫–∞ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –≤—Ä—É—á–Ω—É—é
```bash
curl -X POST "http://localhost:8000/api/reminders/550e8400-e29b-41d4-a716-446655440001/send-now/" \
  -H "Authorization: Bearer your_jwt_token"
```

---

## ‚ùå –ö–æ–¥—ã –æ—à–∏–±–æ–∫

### 400 Bad Request
```json
{
    "error": "–û—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏",
    "details": {
        "scheduled_time": ["–í—Ä–µ–º—è –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –≤ –ø—Ä–æ—à–ª–æ–º"],
        "amount": ["–î–ª—è –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –æ –ø–ª–∞—Ç–µ–∂–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —É–∫–∞–∑–∞—Ç—å —Å—É–º–º—É"]
    }
}
```

### 401 Unauthorized
```json
{
    "detail": "Authentication credentials were not provided."
}
```

### 403 Forbidden
```json
{
    "error": "–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞"
}
```

### 404 Not Found
```json
{
    "detail": "Not found."
}
```

---

## ‚úÖ –°—Ç–∞—Ç—É—Å –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏

### ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –¢–ó:
- [x] 12 –æ—Å–Ω–æ–≤–Ω—ã—Ö API —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤
- [x] 5 —Ç–∏–ø–æ–≤ Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- [x] Celery –∑–∞–¥–∞—á–∏ (–∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç)
- [x] JWT –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
- [x] –ü–æ–ª–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
- [x] –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∏ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞
- [x] –ê—Ç–æ–º–∞—Ä–Ω–æ—Å—Ç—å –æ–ø–µ—Ä–∞—Ü–∏–π
- [x] –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- [x] –ò–Ω–¥–µ–∫—Å—ã –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- [x] Swagger –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- [x] –ú–∏–≥—Ä–∞—Ü–∏–∏ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã
- [x] System check –ø—Ä–æ–π–¥–µ–Ω

### üöÄ –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:
- [x] –ò—Å—Ç–æ—Ä–∏—è –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π —Å –¥–µ—Ç–∞–ª—å–Ω–æ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π
- [x] –ü—Ä–æ—Å—Ä–æ—á–µ–Ω–Ω—ã–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è
- [x] –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
- [x] –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- [x] –î–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- [x] –í—ã—á–∏—Å–ª—è–µ–º—ã–µ –ø–æ–ª—è (is_overdue, time_until_reminder)
- [x] –ë–æ–≥–∞—Ç–æ–µ HTML —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ Telegram

---

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–î–ª—è –≤–æ–ø—Ä–æ—Å–æ–≤ –ø–æ API –º–æ–¥—É–ª—è –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π –æ–±—Ä–∞—â–∞–π—Ç–µ—Å—å:
- **Email:** admin@ovozpay.uz
- **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** `/swagger/` –∏–ª–∏ `/redoc/`
- **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:** –í—Å–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –¥–æ—Å—Ç—É–ø–Ω—ã —á–µ—Ä–µ–∑ Swagger UI

**–ú–æ–¥—É–ª—å –≥–æ—Ç–æ–≤ –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é! üéâ** 